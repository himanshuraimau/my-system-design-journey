# Design a URL Shortener Service (e.g., bit.ly)

## Problem Statement

A URL Shortener is a service that converts a long URL into a shorter, unique alias that redirects users to the original URL. The alias is a fixed-length string, typically using English letters and digits. The system should:

- Handle millions of URLs.
- Allow users to create, store, and retrieve shortened URLs efficiently.
- Ensure each shortened URL is unique and persistent.
- Support high traffic with near real-time redirection.
- Optionally provide analytics (e.g., click counts, user locations).

---

## Functional Requirements

### Core Requirements

- **URL Shortening:**  
    Users can input a long URL and receive a unique, shortened alias in a compact format (letters and digits).

- **URL Redirection:**  
    Accessing a shortened URL should redirect users to the original URL with minimal delay.

- **Link Analytics:**  
    The system should track the number of times each shortened URL is accessed.

### Out of Scope

- User authentication and authorization.
- Expiration or deletion of URLs by users.
- Advanced analytics beyond click counts.

---

## Scale Requirements

- 100M daily active users
- Read:write ratio = 100:1
- Data retention for 5 years
- ~1 million write requests per day
- Each entry â‰ˆ 500 bytes

---

## Non-Functional Requirements

- **High Availability:**  
    URLs must be accessible 24/7 with minimal downtime.

- **Low Latency:**  
    Redirections should occur almost instantly (ideally under a few milliseconds).

- **High Durability:**  
    Shortened URLs must persist reliably over time, even across server failures.

- **Security:**  
    Prevent creation of malicious links and protect user data. Implement safeguards against spam, abuse, and unauthorized access.

---

## API Endpoints

### POST `/api/urls/shorten`

Shorten a given long URL and return the shortened URL.

**Request Body:**
```json
{
    "longUrl": "http://example.com"
}
```

**Response Body:**
```json
{
    "shortUrl": "http://urlshort.ly/abcd"
}
```

### GET `/api/urls/{shortUrl}`

Redirect to the original long URL using the shortened URL.

**Response Body:**
```json
{
    "longUrl": "http://example.com"
}
```